import{j as e}from"./index-CVfE49ll.js";import{u as h,D as y,a as b,B as C}from"./index-DOh0zPzq.js";import{b as u,c as m,d,e as l,f as p,u as g,F,t as P,z as c}from"./form-BKpDzj8W.js";import{B as R}from"./button-CSuLezZL.js";import{u as _,V as E}from"./index-ZiYbebhz.js";import{d as I}from"./index-oZfdXCXz.js";import{I as x}from"./input-DzGSjn4M.js";import{C as K}from"./circle-plus-NuuZ6w6j.js";function S({form:s,isPending:o}){return e.jsx(u,{disabled:o,name:"name",control:s.control,render:({field:t})=>e.jsxs(m,{children:[e.jsx(d,{children:"Name"}),e.jsx(l,{children:e.jsx(x,{...t,onKeyUp:r=>r.stopPropagation()})}),e.jsx(p,{})]})})}function A({form:s,isPending:o}){return e.jsx(u,{disabled:o,name:"rate",control:s.control,render:({field:t})=>e.jsxs(m,{children:[e.jsx(d,{children:"Rate â‚¹"}),e.jsx(l,{children:e.jsx(x,{...t,onKeyUp:r=>r.stopPropagation()})}),e.jsx(p,{})]})})}const B=c.object({name:c.string(),rate:c.coerce.number()});function D({openDialog:s,setOpenDialog:o}){const t=_(),{userId:r}=I.useAuth(),{mutate:j,isPending:a}=h({mutationKey:["post_product"],mutationFn:async i=>await b.post(`${C}/${r}/product`,i),onSuccess:()=>{t.invalidateQueries({queryKey:["get_products"]}),t.invalidateQueries({queryKey:["get_all_products"]}),o(!1),E.success("product added",{position:"bottom-right"})}}),n=g({resolver:P(B)});function f(){n.handleSubmit(i=>j(i))()}return e.jsx(y,{dialogContentClassName:"w-[25rem]",title:"Create product",open:s,titleIcon:K,onClose:()=>o(!1),children:e.jsxs("form",{className:"space-y-5",children:[e.jsxs(F,{...n,children:[e.jsx(S,{form:n,isPending:a}),e.jsx(A,{form:n,isPending:a})]}),e.jsx(R,{disabled:a,type:"button",onClick:f,children:"Create"})]})})}export{D as A};
