var Y=t=>{throw TypeError(t)};var $=(t,e,s)=>e.has(t)||Y("Cannot "+s);var a=(t,e,s)=>($(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?Y("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),d=(t,e,s,r)=>($(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);var N=(t,e,s,r)=>({set _(i){d(t,e,i,s)},get _(){return a(t,e,r)}});import{r as H,j as m,O as fe}from"./index-CVfE49ll.js";import{d as ye,S as pe}from"./index-oZfdXCXz.js";import{S as ce,h as le,Q as ge,n as b,m as G,M as me,a as V,b as M,e as ve,c as be,d as Oe,f as Qe,o as W,r as X,g as Pe,i as Z,p as ee,s as Ce,j as Me,I as we,k as te,O as De}from"./index-ZiYbebhz.js";import{M as Ee,L as Ae,S as Se}from"./browser-DrVg5YfN.js";var C,ne,qe=(ne=class extends ce{constructor(e={}){super();v(this,C);this.config=e,d(this,C,new Map)}build(e,s,r){const i=s.queryKey,n=s.queryHash??le(i,s);let l=this.get(n);return l||(l=new ge({client:e,queryKey:i,queryHash:n,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(l)),l}add(e){a(this,C).has(e.queryHash)||(a(this,C).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=a(this,C).get(e.queryHash);s&&(e.destroy(),s===e&&a(this,C).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){b.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return a(this,C).get(e)}getAll(){return[...a(this,C).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>G(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>G(e,r)):s}notify(e){b.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){b.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){b.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},C=new WeakMap,ne),w,Q,k,ue,je=(ue=class extends ce{constructor(e={}){super();v(this,w);v(this,Q);v(this,k);this.config=e,d(this,w,new Set),d(this,Q,new Map),d(this,k,0)}build(e,s,r){const i=new me({mutationCache:this,mutationId:++N(this,k)._,options:e.defaultMutationOptions(s),state:r});return this.add(i),i}add(e){a(this,w).add(e);const s=U(e);if(typeof s=="string"){const r=a(this,Q).get(s);r?r.push(e):a(this,Q).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(a(this,w).delete(e)){const s=U(e);if(typeof s=="string"){const r=a(this,Q).get(s);if(r)if(r.length>1){const i=r.indexOf(e);i!==-1&&r.splice(i,1)}else r[0]===e&&a(this,Q).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=U(e);if(typeof s=="string"){const r=a(this,Q).get(s),i=r==null?void 0:r.find(n=>n.state.status==="pending");return!i||i===e}else return!0}runNext(e){var r;const s=U(e);if(typeof s=="string"){const i=(r=a(this,Q).get(s))==null?void 0:r.find(n=>n!==e&&n.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){b.batch(()=>{a(this,w).forEach(e=>{this.notify({type:"removed",mutation:e})}),a(this,w).clear(),a(this,Q).clear()})}getAll(){return Array.from(a(this,w))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>V(s,r))}findAll(e={}){return this.getAll().filter(s=>V(e,s))}notify(e){b.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return b.batch(()=>Promise.all(e.map(s=>s.continue().catch(M))))}},w=new WeakMap,Q=new WeakMap,k=new WeakMap,ue);function U(t){var e;return(e=t.options.scope)==null?void 0:e.id}function se(t){return{onFetch:(e,s)=>{var y,h,p,S,T;const r=e.options,i=(p=(h=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:h.fetchMore)==null?void 0:p.direction,n=((S=e.state.data)==null?void 0:S.pages)||[],l=((T=e.state.data)==null?void 0:T.pageParams)||[];let u={pages:[],pageParams:[]},o=0;const f=async()=>{let O=!1;const q=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(e.signal.aborted?O=!0:e.signal.addEventListener("abort",()=>{O=!0}),e.signal)})},_=ve(e.options,e.fetchOptions),K=async(g,P,x)=>{if(O)return Promise.reject();if(P==null&&g.pages.length)return Promise.resolve(g);const z={client:e.client,queryKey:e.queryKey,pageParam:P,direction:x?"backward":"forward",meta:e.options.meta};q(z);const de=await _(z),{maxPages:B}=e.options,J=x?be:Oe;return{pages:J(g.pages,de,B),pageParams:J(g.pageParams,P,B)}};if(i&&n.length){const g=i==="backward",P=g?Fe:re,x={pages:n,pageParams:l},z=P(r,x);u=await K(x,z,g)}else{const g=t??n.length;do{const P=o===0?l[0]??r.initialPageParam:re(r,u);if(o>0&&P==null)break;u=await K(u,P),o++}while(o<g)}return u};e.options.persister?e.fetchFn=()=>{var O,q;return(q=(O=e.options).persister)==null?void 0:q.call(O,f,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=f}}}function re(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function Fe(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var c,D,E,j,F,A,R,I,oe,Re=(oe=class{constructor(t={}){v(this,c);v(this,D);v(this,E);v(this,j);v(this,F);v(this,A);v(this,R);v(this,I);d(this,c,t.queryCache||new qe),d(this,D,t.mutationCache||new je),d(this,E,t.defaultOptions||{}),d(this,j,new Map),d(this,F,new Map),d(this,A,0)}mount(){N(this,A)._++,a(this,A)===1&&(d(this,R,Qe.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,c).onFocus())})),d(this,I,W.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,c).onOnline())})))}unmount(){var t,e;N(this,A)._--,a(this,A)===0&&((t=a(this,R))==null||t.call(this),d(this,R,void 0),(e=a(this,I))==null||e.call(this),d(this,I,void 0))}isFetching(t){return a(this,c).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return a(this,D).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,c).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=a(this,c).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(X(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return a(this,c).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),i=a(this,c).get(r.queryHash),n=i==null?void 0:i.state.data,l=Pe(e,n);if(l!==void 0)return a(this,c).build(this,r).setData(l,{...s,manual:!0})}setQueriesData(t,e,s){return b.batch(()=>a(this,c).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,c).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=a(this,c);b.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=a(this,c);return b.batch(()=>(s.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=b.batch(()=>a(this,c).findAll(t).map(i=>i.cancel(s)));return Promise.all(r).then(M).catch(M)}invalidateQueries(t,e={}){return b.batch(()=>(a(this,c).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=b.batch(()=>a(this,c).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let n=i.fetch(void 0,s);return s.throwOnError||(n=n.catch(M)),i.state.fetchStatus==="paused"?Promise.resolve():n}));return Promise.all(r).then(M)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=a(this,c).build(this,e);return s.isStaleByTime(X(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(M).catch(M)}fetchInfiniteQuery(t){return t.behavior=se(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(M).catch(M)}ensureInfiniteQueryData(t){return t.behavior=se(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return W.isOnline()?a(this,D).resumePausedMutations():Promise.resolve()}getQueryCache(){return a(this,c)}getMutationCache(){return a(this,D)}getDefaultOptions(){return a(this,E)}setDefaultOptions(t){d(this,E,t)}setQueryDefaults(t,e){a(this,j).set(Z(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...a(this,j).values()],s={};return e.forEach(r=>{ee(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){a(this,F).set(Z(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...a(this,F).values()],s={};return e.forEach(r=>{ee(t,r.mutationKey)&&Object.assign(s,r.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...a(this,E).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=le(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ce&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...a(this,E).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){a(this,c).clear(),a(this,D).clear()}},c=new WeakMap,D=new WeakMap,E=new WeakMap,j=new WeakMap,F=new WeakMap,A=new WeakMap,R=new WeakMap,I=new WeakMap,oe);function he(t){return t}function Ie(t){return{mutationKey:t.options.mutationKey,state:t.state,...t.options.scope&&{scope:t.options.scope},...t.meta&&{meta:t.meta}}}function Te(t,e,s){var r;return{state:{...t.state,...t.state.data!==void 0&&{data:e(t.state.data)}},queryKey:t.queryKey,queryHash:t.queryHash,...t.state.status==="pending"&&{promise:(r=t.promise)==null?void 0:r.then(e).catch(i=>s(i)?Promise.reject(new Error("redacted")):Promise.reject(i))},...t.meta&&{meta:t.meta}}}function Ke(t){return t.state.isPaused}function xe(t){return t.state.status==="success"}function He(t){return!0}function ke(t,e={}){var o,f,y,h;const s=e.shouldDehydrateMutation??((o=t.getDefaultOptions().dehydrate)==null?void 0:o.shouldDehydrateMutation)??Ke,r=t.getMutationCache().getAll().flatMap(p=>s(p)?[Ie(p)]:[]),i=e.shouldDehydrateQuery??((f=t.getDefaultOptions().dehydrate)==null?void 0:f.shouldDehydrateQuery)??xe,n=e.shouldRedactErrors??((y=t.getDefaultOptions().dehydrate)==null?void 0:y.shouldRedactErrors)??He,l=e.serializeData??((h=t.getDefaultOptions().dehydrate)==null?void 0:h.serializeData)??he,u=t.getQueryCache().getAll().flatMap(p=>i(p)?[Te(p,l,n)]:[]);return{mutations:r,queries:u}}function _e(t,e,s){var o,f;if(typeof e!="object"||e===null)return;const r=t.getMutationCache(),i=t.getQueryCache(),n=((o=s==null?void 0:s.defaultOptions)==null?void 0:o.deserializeData)??((f=t.getDefaultOptions().hydrate)==null?void 0:f.deserializeData)??he,l=e.mutations||[],u=e.queries||[];l.forEach(({state:y,...h})=>{var p,S;r.build(t,{...(p=t.getDefaultOptions().hydrate)==null?void 0:p.mutations,...(S=s==null?void 0:s.defaultOptions)==null?void 0:S.mutations,...h},y)}),u.forEach(({queryKey:y,state:h,queryHash:p,meta:S,promise:T})=>{var _,K;let O=i.get(p);const q=h.data===void 0?h.data:n(h.data);if(O){if(O.state.dataUpdatedAt<h.dataUpdatedAt){const{fetchStatus:g,...P}=h;O.setState({...P,data:q})}}else O=i.build(t,{...(_=t.getDefaultOptions().hydrate)==null?void 0:_.queries,...(K=s==null?void 0:s.defaultOptions)==null?void 0:K.queries,queryKey:y,queryHash:p,meta:S},{...h,data:q,fetchStatus:"idle"});if(T){const g=Promise.resolve(T).then(n);O.fetch(void 0,{initialPromise:g})}})}var ze=["added","removed","updated"];function ae(t){return ze.includes(t)}async function Ne({queryClient:t,persister:e,maxAge:s=1e3*60*60*24,buster:r="",hydrateOptions:i}){try{const n=await e.restoreClient();if(n)if(n.timestamp){const l=Date.now()-n.timestamp>s,u=n.buster!==r;l||u?e.removeClient():_e(t,n.clientState,i)}else e.removeClient()}catch{e.removeClient()}}async function ie({queryClient:t,persister:e,buster:s="",dehydrateOptions:r}){const i={buster:s,timestamp:Date.now(),clientState:ke(t,r)};await e.persistClient(i)}function Ue(t){const e=t.queryClient.getQueryCache().subscribe(r=>{ae(r.type)&&ie(t)}),s=t.queryClient.getMutationCache().subscribe(r=>{ae(r.type)&&ie(t)});return()=>{e(),s()}}var Le=({client:t,children:e,persistOptions:s,onSuccess:r,...i})=>{const[n,l]=H.useState(!0),u=H.useRef({persistOptions:s,onSuccess:r}),o=H.useRef(!1);return H.useEffect(()=>{u.current={persistOptions:s,onSuccess:r}}),H.useEffect(()=>{const f={...u.current.persistOptions,queryClient:t};return o.current||(o.current=!0,Ne(f).then(async()=>{var y,h;try{await((h=(y=u.current).onSuccess)==null?void 0:h.call(y))}finally{l(!1)}})),n?void 0:Ue(f)},[t,n]),m.jsx(Me,{client:t,...i,children:m.jsx(we,{value:n,children:e})})};function L(){}function Be({storage:t,key:e="REACT_QUERY_OFFLINE_CACHE",throttleTime:s=1e3,serialize:r=JSON.stringify,deserialize:i=JSON.parse,retry:n}){if(t){const l=u=>{try{t.setItem(e,r(u));return}catch(o){return o}};return{persistClient:Je(u=>{let o=u,f=l(o),y=0;for(;f&&o;)y++,o=n==null?void 0:n({persistedClient:o,error:f,errorCount:y}),o&&(f=l(o))},s),restoreClient:()=>{const u=t.getItem(e);if(u)return i(u)},removeClient:()=>{t.removeItem(e)}}}return{persistClient:L,restoreClient:L,removeClient:L}}function Je(t,e=100){let s=null,r;return function(...i){r=i,s===null&&(s=setTimeout(()=>{t(...r),s=null},e))}}const Ze=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"}];function et({children:t}){const e=new Re({defaultOptions:{mutations:{onError(r){r.response.status!==500?te.error(r.response.data.error):te.error("Ineternal server error"),console.error(r)}},queries:{gcTime:144e4,staleTime:1/0,refetchOnWindowFocus:!1,retry:!1}}}),s=Be({storage:typeof window<"u"?window.localStorage:null});return m.jsxs("html",{lang:"en",children:[m.jsxs("head",{children:[m.jsx("meta",{charSet:"utf-8"}),m.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),m.jsx(Ee,{}),m.jsx(Ae,{})]}),m.jsxs("body",{className:"max-h-screen  overflow-hidden",children:[m.jsx(De,{}),m.jsx(Le,{persistOptions:{persister:s},client:e,children:t}),m.jsx(pe,{}),m.jsx(Se,{})]})]})}function Ye(){return m.jsx(fe,{})}const tt=ye.ClerkApp(Ye,{signUpForceRedirectUrl:"/create-bill",signInFallbackRedirectUrl:"/create-bill"});export{et as Layout,tt as default,Ze as links};
